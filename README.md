# テトリスゲーム - 第4回課題

## ディレクトリ構造

```
04_softwarDesignTechniques/
├── .git/                    # Gitリポジトリ管理ファイル
├── .vscode/                 # VS Code設定ファイル
│   └── settings.json
├── app.js                   # メインのゲームロジック
├── index.html               # HTMLファイル
├── style.css                # スタイルシート
├── homework.md              # 課題内容
├── Pronpt.txt               # プロンプト記録
└── README.md                # このファイル
```

## 着手手順書

### コミット①: T,S,Z,Oのテトロミの追加
- **対象関数**: `createTetromino()`
- **内容**: 既存の3種類（I、J、L）に加えて、T、S、Z、Oの4種類のテトロミノを追加
- **変更箇所**: `minoes`配列に新しいテトロミノの定義を追加

### コミット②: テトロミノの操作の横幅制限の追加
- **対象関数**: `handleMovementKey()`、`moveTetromino()`
- **内容**: テトロミノがフィールドの左右の端を超えないように移動制限を実装
- **変更箇所**: キー入力処理と移動処理に境界チェックを追加

### コミット③: フィールドの配列を追加
- **対象**: グローバル変数
- **内容**: フィールドの状態を保持する2次元配列`playfield`を追加
- **変更箇所**: `let playfield = Array(FIELD_HEIGHT).fill(null).map(() => Array(FIELD_WIDTH).fill(null));`

### コミット④: 当たり判定をフィールドの配列にて行うように変更
- **対象関数**: `isValidPosition()`
- **内容**: テトロミノの移動時にフィールド配列を参照して衝突判定を実装
- **変更箇所**: 左右端、最下部、既存ブロックとの衝突チェックを追加

### コミット⑤: 最下部到達時次のテトリスが出てくるように修正
- **対象関数**: `updateGameState()`
- **内容**: テトロミノが固定されたら新しいテトロミノを生成
- **変更箇所**: `isTetrominoLocked()`で判定し、固定後に`createTetromino()`を呼び出し

### コミット⑥: テトロミノが積み上がるように状態を保存するようにした
- **対象関数**: `lockTetromino()`
- **内容**: テトロミノをフィールド配列に固定する処理を実装
- **変更箇所**: テトロミノの各セルをフィールド配列に色情報とともに保存

### コミット⑦: 色の保存が間に合わず積み上がる時に前のテトロミノの色が引き継がれるのを修正
- **対象関数**: `renderLockedBlocks()`
- **内容**: フィールド配列に保存された色情報を正しく描画
- **変更箇所**: 各セルの色をフィールド配列から取得して描画

### コミット⑧: Spaseによるハードドロップの追加
- **対象関数**: `hardDropTetromino()`
- **内容**: スペースキーでテトロミノを一気に落下させる機能を実装
- **変更箇所**: `handleMovementKey()`にスペースキー処理を追加、`hardDropTetromino()`関数を新規作成

### コミット⑨: テとろみの回転処理を追加
- **対象関数**: `rotateTetromino()`、`rotateMatrix()`
- **内容**: NキーとMキーでテトロミノを回転させる機能を実装
- **変更箇所**: 行列回転のロジックを実装し、回転後の衝突判定を追加

### コミット⑩: ゲームオーバーの判定とテキストの表示を追加
- **対象関数**: `isGameOverCondition()`、`triggerGameOver()`、`renderGameOverText()`
- **内容**: テトロミノがフィールド最上部を超えた場合のゲームオーバー判定と表示
- **変更箇所**: グローバル変数`isGameOver`を追加、ゲームオーバー時の処理と表示を実装

### コミット⑪: ゲームオーバーになってから初めから始ますようにEnterに条件を追加
- **対象関数**: `handleSystemKey()`
- **内容**: ゲームオーバー後にEnterキーでゲームをリセットできるように修正
- **変更箇所**: `handleSystemKey()`内でゲームオーバーフラグを確認し、リセット処理を実行

### コミット⑫: すべて埋まった行を削除するテトリスを追加
- **対象関数**: `clearFullRows()`
- **内容**: 横一列がすべて埋まった行を削除する機能を実装
- **変更箇所**: フィールド配列をフィルタリングし、削除した行の分だけ上に空行を追加

## ゲームの操作方法

- **左右移動**: 矢印キー（←→）
- **下移動**: 矢印キー（↓）
- **ハードドロップ**: スペースキー
- **左回転**: Nキー
- **右回転**: Mキー
- **ゲーム開始/一時停止**: Enterキー
- **リセット**: Rキー

## 実行方法

1. `index.html`をブラウザで開く
2. Enterキーを押してゲームを開始

## 開発環境

- HTML5 Canvas
- Vanilla JavaScript
- Git でバージョン管理

## Git
- https://github.com/c0a22080fa/04_softwarDesignTechniques